<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />

		<script type="module" src="../little-planet.js"></script>
		<link rel="stylesheet" href="../little-planet.css" />

		<link rel="stylesheet" href="examples.css" />
<style>

h2 {
	border-top: 1px solid gray;
	margin-top: 1em;
	margin-bottom: 0;
}

img {
	max-width: 100%;
	max-height: 30vh;
	margin-top: 0.5em;
	display: block;
}

@media (orientation: portrait) {
	little-planet { max-width: 100%; }
}

@media (orientation: landscape) {
	little-planet { max-width: 80vh; }
}

		</style>
	</head>
	<body>
		<h1>Little Planet (Polar Panorama) Creator</h1>

		<h2>Choose an image</h2>
		<p>In equirectangular projection, max width 8192, max height 4096, optimal aspect ratio 2:1</p>
		<input type="file" accept="image/*" />
		<img alt="Source image preview" />

		<h2>Result</h2>
		<p>Right-click to save the full-resolution image</p>
		<little-planet></little-planet>

		<footer>
			&copy; 2022 <a href="https://ondras.zarovi.cz/">Ondřej Žára</a> | <a href="https://github.com/ondras/little-planet">GitHub</a>
		</footer>

		<script>
const source = document.querySelector("img");
const scene = document.querySelector("little-planet");

source.addEventListener("load", async e => {
	await customElements.whenDefined("little-planet");
	scene.src = e.target.src;
});

scene.addEventListener("load", e => {
	let scene = e.target;
	scene.width = scene.height = scene.planetSize;
});

document.querySelector("[type=file]").addEventListener("change", e => {
	let f = e.target.files[0];
	if (!f) { return; }
	source.src = URL.createObjectURL(f);
});

source.src = "img/seznam.jpg"; // demo
//source.src = "sanatorium.jpg"; // demo
//source.src = "world-graticule.png"; // demo

		</script>
	</body>
</html>

